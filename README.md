# Spotifier

Simple Spotify search library that provides song search and best match retrieval from the Spotify API

## Install

```bash
npm install spotifier
```

## Usage:

In your code, require the `spotifier` module as follows.

```javascript
var spotifier = require('spotifier');

var client = spotifier();

client.search('foo fighters breakout', function (err, result) {
  // work with results here...
});
```

### Options:

* searchUrl - URL of API endpoint (defaults to `http://ws.spotify.com/search/1/track.json`)
* timeout - Timeout for request in milliseconds (defaults to `10000`)

```javascript
var spotifier = require('spotifier');

var client = spotifier({
  searchUrl : 'http://ws.spotify.com/search/1/track.json',
  timeout : 10000
});
```

### Find Best Match

Find the single best match for a search:

```javascript
var client = (require('spotifier')());

client.findBestMatch('beck loser', function (err, result) {
  if (err) {
    console.error(err);
  }

  console.log(result);
});
```

Which returns the following response:

```javascript
{ album:
   { released: '1994',
     href: 'spotify:album:7MKi8PuCX5QJtaG9wLbOI2',
     name: 'Mellow Gold',
     availability: { territories: 'AD AR AT AU BE BG BO BR CH CL CO CR CY CZ DE DK DO EC EE ES FI FR GB GR GT HK HN HR HU IE IS IT LI LT LU LV MC MY NI NL NO NZ PA PE PH PL PT PY RO SE SG SI SK SV TR TW UY' } },
  name: 'Loser',
  popularity: '0.66',
  'external-ids': [ { type: 'isrc', id: 'USGF19463401' } ],
  length: 234.96,
  href: 'spotify:track:4b8GTae6rqb9oPiRzVa3Gy',
  artists: [ { href: 'spotify:artist:3vbKDsSS70ZX9D2OcvbZmS', name: 'Beck' } ],
  'track-number': '1' }
```

### Search

Find all matches for a search:

_Please note, the `options` parameter is optional and can be omitted_

```javascript
var
  client = (require('spotifier')()),
  options = {
    page : 1
  };

client.search(options, 'beck loser', function (err, result) {
  if (err) {
    console.error(err);
  }

  console.log(result);
});
```

Which returns the following response:

```javascript
{ info:
   { num_results: 46,
     limit: 100,
     offset: 0,
     query: 'beck loser',
     type: 'track',
     page: 1 },
  tracks:
   [ { album: [Object],
       name: 'Loser',
       popularity: '0.66',
       'external-ids': [Object],
       length: 234.96,
       href: 'spotify:track:4b8GTae6rqb9oPiRzVa3Gy',
       artists: [Object],
       'track-number': '1' },
     { album: [Object],
       name: 'Loser',
       popularity: '0.66',
       'external-ids': [Object],
       length: 235,
       href: 'spotify:track:5PntSbMHC1ud6Vvl8x56qd',
       artists: [Object],
       'track-number': '1' },
     { album: [Object],
       name: 'Loser',
       popularity: '0.5',
       'external-ids': [Object],
       length: 235,
       href: 'spotify:track:5NTZM8YYeKM2YsGSffVIge',
       artists: [Object],
       'track-number': '1' },
     { album: [Object],
       name: 'Loser',
       popularity: '0.46',
       'external-ids': [Object],
       length: 235.026,
       href: 'spotify:track:6h6p4WuDlZVdBfmGqT0dcR',
       artists: [Object],
       'track-number': '1' },
     { album: [Object],
       name: 'Loser',
       popularity: '0.33',
       'external-ids': [Object],
       length: 235.5,
       href: 'spotify:track:2egIbgsH3SU7O52AmT0sAn',
       artists: [Object],
       'track-number': '13' },
     { album: [Object],
       name: 'Soul Suckin\' Jerk - Reject Version',
       popularity: '0.31',
       'external-ids': [Object],
       length: 370.226,
       href: 'spotify:track:3nKKPl0jzp4zGRVaRqv0t5',
       artists: [Object],
       'track-number': '4' },
     { album: [Object],
       name: 'Corvette Bummer',
       popularity: '0.24',
       'external-ids': [Object],
       length: 297.306,
       href: 'spotify:track:3Z5esglHi4S98W1BpiTaq5',
       artists: [Object],
       'track-number': '2' },
     { album: [Object],
       name: 'Alcohol',
       popularity: '0.21',
       'external-ids': [Object],
       length: 231.066,
       href: 'spotify:track:1kfKoQqSuCSN27mvnzHtak',
       artists: [Object],
       'track-number': '3' },
     { album: [Object],
       name: 'Fume',
       popularity: '0.21',
       'external-ids': [Object],
       length: 269.266,
       href: 'spotify:track:0KqiEXKPfjlFHCmrbP6qIV',
       artists: [Object],
       'track-number': '5' },
     { album: [Object],
       name: 'Loser',
       popularity: '0.14',
       'external-ids': [Object],
       length: 235.706,
       href: 'spotify:track:2m9cDUawCW5SfnpwHWtJJi',
       artists: [Object],
       'track-number': '4' },
     { album: [Object],
       name: 'Loser',
       popularity: '0.16',
       'external-ids': [Object],
       length: 216.839,
       href: 'spotify:track:0054WfTWoyoRN9GaUomDWT',
       artists: [Object],
       'track-number': '1' },
     { album: [Object],
       name: 'Loser',
       popularity: '0.04',
       'external-ids': [Object],
       length: 235.92,
       href: 'spotify:track:2ELMUGBFIqUdRSAf24nxbp',
       artists: [Object],
       'track-number': '13' },
     { album: [Object],
       name: 'Loser',
       popularity: '0.03',
       'external-ids': [Object],
       length: 235.133,
       href: 'spotify:track:5Km3EdIOL6PaFbbZWGPiCH',
       artists: [Object],
       'track-number': '1' },
     { album: [Object],
       name: 'Loser',
       popularity: '0.14',
       'external-ids': [Object],
       length: 196.013,
       href: 'spotify:track:0lUUoFhb6ulRwl2EEmFvKf',
       artists: [Object],
       'track-number': '7' },
     { album: [Object],
       name: 'Loser',
       popularity: '0.11',
       'external-ids': [Object],
       length: 352.866,
       href: 'spotify:track:0xqFl9NTAwDUTGNWYdC7OJ',
       artists: [Object],
       'track-number': '1' },
     { album: [Object],
       name: 'Loser - (Tribute to Beck)',
       popularity: '0.08',
       'external-ids': [Object],
       length: 236.36,
       href: 'spotify:track:0sY28whZUk3CoWLyxGSZ4D',
       artists: [Object],
       'track-number': '16' },
     { album: [Object],
       name: 'Karaoke - Loser',
       popularity: '0.05',
       'external-ids': [Object],
       length: 233.142,
       href: 'spotify:track:09vimWMSbV1uB89uxDe5dx',
       artists: [Object],
       'track-number': '3' },
     { album: [Object],
       name: 'Loser',
       popularity: '0.02',
       'external-ids': [Object],
       length: 216.839,
       href: 'spotify:track:4JINKg33CV2CJ1gaefp9bt',
       artists: [Object],
       'track-number': '1' },
     { album: [Object],
       name: 'Loser (In the Style of Beck) [Karaoke Version]',
       popularity: '0',
       'external-ids': [Object],
       length: 232.188,
       href: 'spotify:track:5muRSEpdKUW8f5dlqJ6a7s',
       artists: [Object],
       'track-number': '1' },
     { album: [Object],
       name: 'Loser (Instrumental Version)',
       popularity: '0.02',
       'external-ids': [Object],
       length: 233.665,
       href: 'spotify:track:0ybGBvZgRQxsRG0te9i2jb',
       artists: [Object],
       'track-number': '1' },
     { album: [Object],
       name: 'Loser (Karaoke Version)',
       popularity: '0',
       'external-ids': [Object],
       length: 233.665,
       href: 'spotify:track:29Bj5jXt3epD5UrkJQ7bz5',
       artists: [Object],
       'track-number': '2' },
     { album: [Object],
       name: 'Loser (In the Style of Beck) [Performance Track with Demonstration Vocals]',
       popularity: '0.02',
       'external-ids': [Object],
       length: 230.377,
       href: 'spotify:track:1ZN8tUCTuwHhLyt5iFlfUH',
       artists: [Object],
       'track-number': '1' },
     { album: [Object],
       name: 'Loser (In the Style of Beck) [Performance Track with Demonstration Vocals] - Single',
       popularity: '0',
       'external-ids': [Object],
       length: 230.59,
       href: 'spotify:track:4stCiuAz5wxYZj1qPB0c0Y',
       artists: [Object],
       'track-number': '1' },
     { album: [Object],
       name: 'Loser (In the Style of Beck) [Performance Track with Demonstration Vocals]',
       popularity: '0',
       'external-ids': [Object],
       length: 230.59,
       href: 'spotify:track:4KN8X4ZgBjTQbdMIPJooZm',
       artists: [Object],
       'track-number': '1' },
     { album: [Object],
       name: 'Loser (In the Style of Beck) [Karaoke Version]',
       popularity: '0',
       'external-ids': [Object],
       length: 235.213,
       href: 'spotify:track:6i2DsscbYSKaXNQgOOK53x',
       artists: [Object],
       'track-number': '2' },
     { album: [Object],
       name: 'Loser (Karaoke Version) - Originally Performed By Beck',
       popularity: '0',
       'external-ids': [Object],
       length: 235.213,
       href: 'spotify:track:1Mp8kd6tPtNsZjerFMTRt7',
       artists: [Object],
       'track-number': '10' },
     { album: [Object],
       name: 'Loser - Karaoke Version',
       popularity: '0',
       'external-ids': [Object],
       length: 233.093,
       href: 'spotify:track:21lUHT6hIKdtiA0DXQFJOJ',
       artists: [Object],
       'track-number': '1' },
     { album: [Object],
       name: 'Loser - Karaoke Version',
       popularity: '0',
       'external-ids': [Object],
       length: 233.093,
       href: 'spotify:track:20SQ6XdUyDtqfO5WUnlJTO',
       artists: [Object],
       'track-number': '1' },
     { album: [Object],
       name: 'Loser (Made Famous By Beck)',
       popularity: '0.01',
       'external-ids': [Object],
       length: 239.262,
       href: 'spotify:track:16umfoUScHTgElxO6VoX1p',
       artists: [Object],
       'track-number': '31' },
     { album: [Object],
       name: 'Loser (Made Famous By Beck)',
       popularity: '0.01',
       'external-ids': [Object],
       length: 239.262,
       href: 'spotify:track:0iRaCYsihupMUOCmA1BYzi',
       artists: [Object],
       'track-number': '31' },
     { album: [Object],
       name: 'Loser (Karaoke-Version) As Made Famous By: Beck',
       popularity: '0',
       'external-ids': [Object],
       length: 233.75,
       href: 'spotify:track:0uWOFwcrIQgYhQ2TxAsQrS',
       artists: [Object],
       'track-number': '5' },
     { album: [Object],
       name: 'Loser [In the Style of Beck] {Karaoke Version}',
       popularity: '0',
       'external-ids': [Object],
       length: 230.589,
       href: 'spotify:track:1AqJg13etZ55iHl1fvbkbC',
       artists: [Object],
       'track-number': '1' },
     { album: [Object],
       name: 'Loser (Karaoke Version) - Originally Performed by Beck',
       popularity: '0',
       'external-ids': [Object],
       length: 229.386,
       href: 'spotify:track:4BGQIVT3arM7tgw6GlsqUo',
       artists: [Object],
       'track-number': '6' },
     { album: [Object],
       name: 'Loser - Karaoke Demonstration With Lead Vocal',
       popularity: '0',
       'external-ids': [Object],
       length: 231.182,
       href: 'spotify:track:0v3ZsulusA6cvcFwuEcnwY',
       artists: [Object],
       'track-number': '2' },
     { album: [Object],
       name: 'Loser (In The Style Of Beck) [Karaoke Version]',
       popularity: '0',
       'external-ids': [Object],
       length: 230.377,
       href: 'spotify:track:56hM4LvrwugGVCsGg5od4j',
       artists: [Object],
       'track-number': '1' },
     { album: [Object],
       name: 'Loser (In the Style of Beck) [Karaoke Version]',
       popularity: '0',
       'external-ids': [Object],
       length: 232.188,
       href: 'spotify:track:3NCO842f7L4ujLkThj3HHf',
       artists: [Object],
       'track-number': '8' },
     { album: [Object],
       name: 'Loser (In the Style of Beck) [Karaoke Version]',
       popularity: '0',
       'external-ids': [Object],
       length: 227.375,
       href: 'spotify:track:5cOj1SFUhDTBDoQMkasqDK',
       artists: [Object],
       'track-number': '11' },
     { album: [Object],
       name: 'Loser (Originally Performed by Beck) [Karaoke Version]',
       popularity: '0',
       'external-ids': [Object],
       length: 227.375,
       href: 'spotify:track:4ScK0wehRKgW3w8125Kckk',
       artists: [Object],
       'track-number': '9' },
     { album: [Object],
       name: 'Loser (Karaoke Version) - Originally Performed By Beck',
       popularity: '0',
       'external-ids': [Object],
       length: 231.826,
       href: 'spotify:track:6LA7xvukpWRr8cbm5TXDhj',
       artists: [Object],
       'track-number': '13' },
     { album: [Object],
       name: 'Loser (Karaoke Version) - Originally Performed By Beck',
       popularity: '0',
       'external-ids': [Object],
       length: 222.167,
       href: 'spotify:track:2pyx7IlEWpblEevneNqEC8',
       artists: [Object],
       'track-number': '1' },
     { album: [Object],
       name: 'Loser (Karaoke Version) - Originally Performed By Beck',
       popularity: '0',
       'external-ids': [Object],
       length: 222.165,
       href: 'spotify:track:1aO0OLAerat3pfyJOde060',
       artists: [Object],
       'track-number': '8' },
     { album: [Object],
       name: 'Loser - Demonstration Version - Includes Lead Singer',
       popularity: '0',
       'external-ids': [Object],
       length: 231.182,
       href: 'spotify:track:5fZ9R0uiCDxscBu7f71xyc',
       artists: [Object],
       'track-number': '2' },
     { album: [Object],
       name: 'Loser [In the Style of Beck] {Karaoke Lead Vocal Version}',
       popularity: '0',
       'external-ids': [Object],
       length: 230.59,
       href: 'spotify:track:7axeZwhjWvo53mBga1OU1p',
       artists: [Object],
       'track-number': '2' },
     { album: [Object],
       name: 'Loser (In The Style Of Beck) [Karaoke Lead Vocal Version]',
       popularity: '0',
       'external-ids': [Object],
       length: 230.377,
       href: 'spotify:track:1CID09pjiEUQWjrVdHcFfj',
       artists: [Object],
       'track-number': '2' },
     { album: [Object],
       name: 'Loser (Karaoke Version With Guide Melody) - Originally Performed By Beck',
       popularity: '0',
       'external-ids': [Object],
       length: 231.826,
       href: 'spotify:track:1UicR0whY3SP0WPRAGIlD6',
       artists: [Object],
       'track-number': '14' },
     { album: [Object],
       name: 'Loser (Karaoke Version With Background Vocals) - Originally Performed By Beck',
       popularity: '0',
       'external-ids': [Object],
       length: 235.258,
       href: 'spotify:track:0RfFCrhZ4lKFOuTRWCbWhk',
       artists: [Object],
       'track-number': '6' } ] }
```
